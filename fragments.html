<!DOCTYPE html>
<html>
<head>
  <meta charSet='utf-8' />
  <title>Relate docs - Fragments</title>
  <link rel='icon' type='image/png' href='/relate/images/logo.png' />
  <link href='/relate/css/bootstrap.min.css' rel='stylesheet'>
  <link href='/relate/css/docs.css' rel='stylesheet'>
  <link href='/relate/css/font-awesome.min.css' rel='stylesheet'>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,300,700' rel='stylesheet' type='text/css'>
</head>
<body>
  <div class='menu'>
    <div class='logo'>
      <img src='/relate/images/logo.png' />
      <span>Relate.js</span>
    </div>
    <nav class='menu-nav'>
      
        <ul class='nav'>
          <span>Introduction</span>
          <ul class='nav'>
            
              <li>
                <a href='/relate/index.html'>What is relate</a>
              </li>
            
              <li>
                <a href='/relate/how-it-works.html'>How it works</a>
              </li>
            
          </ul>
        </ul>
      
        <ul class='nav'>
          <span>Usage</span>
          <ul class='nav'>
            
              <li>
                <a href='/relate/installation.html'>Installation</a>
              </li>
            
              <li>
                <a href='/relate/reducer.html'>Reducer</a>
              </li>
            
              <li>
                <a href='/relate/root-data-connect.html'>Root data connect</a>
              </li>
            
              <li>
                <a href='/relate/fragments.html' class='active'>Fragments</a>
              </li>
            
              <li>
                <a href='/relate/data-connect.html'>Data connect</a>
              </li>
            
              <li>
                <a href='/relate/mutations.html'>Mutations</a>
              </li>
            
          </ul>
        </ul>
      
        <ul class='nav'>
          <span>Advanced Usage</span>
          <ul class='nav'>
            
              <li>
                <a href='/relate/settings.html'>Changing requests endpoint and headers</a>
              </li>
            
              <li>
                <a href='/relate/intersect.html'>Catch queries or mutations in other reducers</a>
              </li>
            
          </ul>
        </ul>
      
    </nav>
    <a class='footer' href='https://github.com/relax/relate'>
      <i class='fa fa-github'></i>
      <span>Project on github</span>
    </a>
  </div>
  <div class='page'>
    <div class='page-content'>
      <h1>Fragments</h1>
      <p>Before diving into the data connect, let’s see how to define fragments in Relate. Instead of setting up GraphQL fragments as you do in Relay, in Relate fragments are defined as a simple, plain JavaScript object. You do this by attributing the properties you want with a truthy value, can be <code>1</code> or <code>true</code>. For example:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  pages: &#123;</span><br><span class="line">    _id: <span class="number">1</span>,</span><br><span class="line">    title: <span class="number">1</span>,</span><br><span class="line">    date: <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>You can also define nested fragments like so:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  pages: &#123;</span><br><span class="line">    _id: <span class="number">1</span>,</span><br><span class="line">    title: <span class="number">1</span>,</span><br><span class="line">    date: <span class="number">1</span>,</span><br><span class="line">    user: &#123;</span><br><span class="line">      _id: <span class="number">1</span>,</span><br><span class="line">      username: <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Relate also ships with a function to merge fragments with which you can grab in fragments that come from children components and merge them together.</p>
<p>Let’s see an example. Suppose we want to create a component that displays an user profile picture and his name and email on the side. Let’s not worry with data connect and passing props for now, just fragments build:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123;Component&#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;mergeFragments&#125; <span class="keyword">from</span> <span class="string">'relate-js'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> fragments = mergeFragments(</span><br><span class="line">    UserPicture.fragments,</span><br><span class="line">    UserInfo.fragments</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;UserPicture /&gt;</span><br><span class="line">        &lt;UserInfo /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Pretty clean, you’re merging the fragments from the components the <code>User</code> component is rendering. Let’s suppose that <code>UserPicture</code> and <code>UserInfo</code> have the following fragments:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123;Component&#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">UserPicture</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> fragments = &#123;</span><br><span class="line">    user: &#123;</span><br><span class="line">      profile_pic: <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;user&#125; = <span class="keyword">this</span>.props;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;img src=&#123;user.profile_pic&#125; /&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123;Component&#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">UserInfo</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> fragments = &#123;</span><br><span class="line">    user: &#123;</span><br><span class="line">      name: <span class="number">1</span>,</span><br><span class="line">      email: <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  render () &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;user&#125; = <span class="keyword">this</span>.props;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;p&gt;&#123;user.name&#125;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;&#123;user.email&#125;&lt;/p&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Simple example just to demonstrate two things, first the component will receive through props the data they asked for, secondly the <code>mergeFragments</code> will merge the two fragments into:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  user: &#123;</span><br><span class="line">    name: <span class="number">1</span>,</span><br><span class="line">    email: <span class="number">1</span>,</span><br><span class="line">    profile_pic: <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Static fragments should be placed in presentational components which require data from the server. Your container components will be responsible for handling variables and is where the data connect comes to action as we’ll demonstrate in the next page.</p>

    </div>
  </div>
  <div class='switch-page'>
    
      <a class='previous' href='/relate/root-data-connect.html'>
        <i class='fa fa-angle-left'></i>
        <span>Previous</span>
      </a>
    
    
      <a class='next' href='/relate/data-connect.html'>
        <span>Next</span>
        <i class='fa fa-angle-right'></i>
      </a>
    
  </div>
</body>
</html>
