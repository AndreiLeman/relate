<!DOCTYPE html>
<html>
<head>
  <meta charSet='utf-8' />
  <title>Relate docs - Mutations</title>
  <link rel='icon' type='image/png' href='/relate/images/logo.png' />
  <link href='/relate/css/bootstrap.min.css' rel='stylesheet'>
  <link href='/relate/css/docs.css' rel='stylesheet'>
  <link href='/relate/css/font-awesome.min.css' rel='stylesheet'>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,300,700' rel='stylesheet' type='text/css'>
</head>
<body>
  <div class='menu'>
    <div class='logo'>
      <img src='/relate/images/logo.png' />
      <span>Relate.js</span>
    </div>
    <nav class='menu-nav'>
      
        <ul class='nav'>
          <span>Introduction</span>
          <ul class='nav'>
            
              <li>
                <a href='/relate/index.html'>What is relate</a>
              </li>
            
              <li>
                <a href='/relate/how-it-works.html'>How it works</a>
              </li>
            
          </ul>
        </ul>
      
        <ul class='nav'>
          <span>Usage</span>
          <ul class='nav'>
            
              <li>
                <a href='/relate/installation.html'>Installation</a>
              </li>
            
              <li>
                <a href='/relate/reducer.html'>Reducer</a>
              </li>
            
              <li>
                <a href='/relate/root-data-connect.html'>Root data connect</a>
              </li>
            
              <li>
                <a href='/relate/fragments.html'>Fragments</a>
              </li>
            
              <li>
                <a href='/relate/data-connect.html'>Data connect</a>
              </li>
            
              <li>
                <a href='/relate/mutations.html' class='active'>Mutations</a>
              </li>
            
          </ul>
        </ul>
      
        <ul class='nav'>
          <span>Advanced Usage</span>
          <ul class='nav'>
            
              <li>
                <a href='/relate/settings.html'>Changing requests endpoint and headers</a>
              </li>
            
              <li>
                <a href='/relate/intersect.html'>Catch queries or mutations in other reducers</a>
              </li>
            
          </ul>
        </ul>
      
    </nav>
    <a class='footer' href='https://github.com/relax/relate'>
      <i class='fa fa-github'></i>
      <span>Project on github</span>
    </a>
  </div>
  <div class='page'>
    <div class='page-content'>
      <h1>Mutations</h1>
      <p>In Relate mutations are created inside Redux actions. For this Relate provides <code>mutation</code> function which you can return in your actions. It will use the configuration you set as argument and make the request and processing for you.</p>
<p>Here’s an example of an update mutation:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;mutation&#125; <span class="keyword">from</span> <span class="string">'relate-js'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">updatePageTitle</span> (<span class="params">id, title</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> mutation(&#123;</span><br><span class="line">    fragments: &#123;</span><br><span class="line">      updatePageTitle: &#123;</span><br><span class="line">        _id: <span class="number">1</span>,</span><br><span class="line">        title: <span class="number">1</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    variables: &#123;</span><br><span class="line">      updatePageTitle: &#123;</span><br><span class="line">        _id: &#123;</span><br><span class="line">          value: id,</span><br><span class="line">          type: <span class="string">'ID!'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        title: &#123;</span><br><span class="line">          value: title,</span><br><span class="line">          type: <span class="string">'String!'</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Similar to <code>dataConnect</code> you define the mutation(s) in a fragments object type. You should, in the fragments, include everything that may change due to that mutation. You should also include always the <code>_id</code>, Relate will use this to update other connectors who might be listening for this node.</p>
<p>Opposed of what happens in <code>dataConnect</code> variables and variables types in a mutation are all defined together.</p>
<p>This mutation will produce a GraphQL mutation request like this:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  query: <span class="string">`</span><br><span class="line">    mutation ($id: ID!, title: String!) &#123;</span><br><span class="line">      updatePageTitle (id: $id, title: $title) &#123;</span><br><span class="line">        _id</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  `</span>,</span><br><span class="line">  variables: &#123;</span><br><span class="line">    id: ...,</span><br><span class="line">    title: ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Remove-Special-Case"><a href="#Remove-Special-Case" class="headerlink" title="Remove Special Case"></a>Remove Special Case</h2><p>Since Relate is agnostic to your data scheme, it can differentiate a remove action from an update or add one. So in order for a remove action to properly work you also need to provide a <code>type</code> property set to ‘REMOVE’. Here’s an example:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;mutation&#125; <span class="keyword">from</span> <span class="string">'relate-js'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">removePage</span> (<span class="params">id</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> mutation(&#123;</span><br><span class="line">    fragments: &#123;</span><br><span class="line">      removePage: &#123;</span><br><span class="line">        _id: <span class="number">1</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    variables: &#123;</span><br><span class="line">      removePage: &#123;</span><br><span class="line">        _id: &#123;</span><br><span class="line">          value: id,</span><br><span class="line">          type: <span class="string">'ID!'</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    type: <span class="string">'REMOVE'</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Also make sure you retrieve an <code>_id</code> from the operation, Relate will use it to identify the node to remove.</p>

    </div>
  </div>
  <div class='switch-page'>
    
      <a class='previous' href='/relate/data-connect.html'>
        <i class='fa fa-angle-left'></i>
        <span>Previous</span>
      </a>
    
    
      <a class='next' href='/relate/settings.html'>
        <span>Next</span>
        <i class='fa fa-angle-right'></i>
      </a>
    
  </div>
</body>
</html>
